---
Help: Set up Round Rock Police Incidents data source
Test
---
<test page>

!define TEST_SYSTEM {slim}
!path   ./CognitiveCitiesTesting.jar
'''Include Variable Definitions'''

!include <IocSuite.IocServicesSuite.SetUpVariables
'''CREATE CSV DATASOURCES'''

'''Copy source csv to app server '''

| script |
| remote file copy; | ./testfiles/roundrock/${CSV_NAME_RR_POLICE_INCIDENTS} | /opt/IBM/ioc/csv/${CSV_NAME_RR_POLICE_INCIDENTS} | ${APPSERVER} | ${APPSERVERUSER} | ${APPSERVERKEYFILE} | ${APPSERVERKEYPWD} |

'''Create CSV type data source '''

| generic service validator fixture |
| requestType | serviceName | requestBody | customHeaders | getResponseCode? | getResponseMessage? | getResponseId? | getResultCount? | getUrl? |
| POST | /datasource-service/datasources/ | {"name":"${DS_NAME_RR_POLICE_INCIDENTS}","lastUpdateDate":1553559397332,"type":"CSV","scope":"DATASOURCE","label":{"group":"Sample","key":"roundRockPoliceIncidents","i18nLabel":"Police Incidents","resources":[{"id":82305,"lastUpdateDate":1553559397113,"group":"Sample","locale":"en","key":"roundRockPoliceIncidents","value":"Police Incidents"}]},"i18nLabel":"Police Incidents","description":{"group":"DataSourceI18n","key":"i18n_8c007b2f-2cfb-45d4-8969-84b3cd082c31","i18nLabel":"","resources":[{"id":82344,"lastUpdateDate":1553559410565,"group":"DataSourceI18n","locale":"en","key":"i18n_8c007b2f-2cfb-45d4-8969-84b3cd082c31","value":""}]},"receiver":{"type":"com.ibm.ioc.datareceiver.types.DataReceiverCSV","interval":1,"unit":"MINUTES","started":true},"source":{"protocol":"com.ibm.ioc.datasource.ColumnParserCsv","port":0,"directory":"/opt/IBM/ioc/csv/","filename":"${CSV_NAME_RR_POLICE_INCIDENTS}","persistData":true},"columns":[{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"0","targetNames":["NAME"],"hint":"CASE#","label":{"group":"DataSourceI18n","key":"i18n_e8705b03-f3b2-41c2-92e2-440041f40081","i18nLabel":"CASE#","resources":[{"id":82313,"lastUpdateDate":1553559397143,"group":"DataSourceI18n","locale":"en","key":"i18n_e8705b03-f3b2-41c2-92e2-440041f40081","value":"CASE#"}]},"category":"MINIMAL","format":"STRING","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_dd596e33-279c-4507-bf64-46f3caf17085","i18nLabel":"","resources":[{"id":82314,"lastUpdateDate":1553559397147,"group":"DataSourceI18n","locale":"en","key":"i18n_dd596e33-279c-4507-bf64-46f3caf17085","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"1","targetNames":["citycode"],"hint":"citycode","label":{"group":"DataSourceI18n","key":"i18n_21913c27-af34-41e0-b34a-7477a4dabd39","i18nLabel":"citycode","resources":[{"id":82319,"lastUpdateDate":1553559397163,"group":"DataSourceI18n","locale":"en","key":"i18n_21913c27-af34-41e0-b34a-7477a4dabd39","value":"citycode"}]},"category":"FULL","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_1c8d3459-6dc4-40b2-aeba-3c9795af8473","i18nLabel":"","resources":[{"id":82320,"lastUpdateDate":1553559397166,"group":"DataSourceI18n","locale":"en","key":"i18n_1c8d3459-6dc4-40b2-aeba-3c9795af8473","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"TIMESTAMP","sourceType":"VARCHAR","sourceName":"10","targetNames":["LAST_UPDATE_DATE_TIME"],"hint":"LastUpdateDate","label":{"group":"DataSourceI18n","key":"i18n_b8c30361-7b0a-45dd-8fd8-effea9ddef76","i18nLabel":"LastUpdateDate","resources":[{"id":82325,"lastUpdateDate":1553559397182,"group":"DataSourceI18n","locale":"en","key":"i18n_b8c30361-7b0a-45dd-8fd8-effea9ddef76","value":"LastUpdateDate"}]},"category":"MINIMAL","format":"TIMESTAMP","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_10ed9bbf-2fdd-4839-b963-c7d185343fe5","i18nLabel":"","resources":[{"id":82326,"lastUpdateDate":1553559397186,"group":"DataSourceI18n","locale":"en","key":"i18n_10ed9bbf-2fdd-4839-b963-c7d185343fe5","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"11","targetNames":["begindate"],"hint":"begindate","label":{"group":"DataSourceI18n","key":"i18n_0f27d9a6-e330-44d5-b5d0-cf2dc1b4989f","i18nLabel":"begindate","resources":[{"id":82311,"lastUpdateDate":1553559397136,"group":"DataSourceI18n","locale":"en","key":"i18n_0f27d9a6-e330-44d5-b5d0-cf2dc1b4989f","value":"begindate"}]},"category":"FULL","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_76b34daa-d209-4758-93f8-678dd4bf8e87","i18nLabel":"","resources":[{"id":82312,"lastUpdateDate":1553559397140,"group":"DataSourceI18n","locale":"en","key":"i18n_76b34daa-d209-4758-93f8-678dd4bf8e87","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"TIMESTAMP","sourceType":"VARCHAR","sourceName":"12","targetNames":["START_DATE"],"hint":"StartDate","label":{"group":"DataSourceI18n","key":"i18n_0d546c5f-3571-4597-bebc-838138d51037","i18nLabel":"StartDate","resources":[{"id":82339,"lastUpdateDate":1553559397226,"group":"DataSourceI18n","locale":"en","key":"i18n_0d546c5f-3571-4597-bebc-838138d51037","value":"StartDate"}]},"category":"MINIMAL","format":"STRING","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_0f0407cc-11a5-41d5-971c-e27e731693fa","i18nLabel":"","resources":[{"id":82340,"lastUpdateDate":1553559397229,"group":"DataSourceI18n","locale":"en","key":"i18n_0f0407cc-11a5-41d5-971c-e27e731693fa","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"TIMESTAMP","sourceType":"VARCHAR","sourceName":"13","targetNames":["START_TIME"],"hint":"StartTime","label":{"group":"DataSourceI18n","key":"i18n_2c131138-408a-463e-8373-5c534d9f514d","i18nLabel":"StartTime","resources":[{"id":82341,"lastUpdateDate":1553559397232,"group":"DataSourceI18n","locale":"en","key":"i18n_2c131138-408a-463e-8373-5c534d9f514d","value":"StartTime"}]},"category":"MINIMAL","format":"STRING","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_3f71d47f-f3ea-4fa0-a689-877f3952ce80","i18nLabel":"","resources":[{"id":82342,"lastUpdateDate":1553559397250,"group":"DataSourceI18n","locale":"en","key":"i18n_3f71d47f-f3ea-4fa0-a689-877f3952ce80","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"TIMESTAMP","sourceType":"VARCHAR","sourceName":"14","targetNames":["END_DATE"],"hint":"EndDate","label":{"group":"DataSourceI18n","key":"i18n_053c6bb9-a41c-4126-8a9b-ec1b490320ff","i18nLabel":"EndDate","resources":[{"id":82321,"lastUpdateDate":1553559397170,"group":"DataSourceI18n","locale":"en","key":"i18n_053c6bb9-a41c-4126-8a9b-ec1b490320ff","value":"EndDate"}]},"category":"MINIMAL","format":"STRING","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_05955ab3-2efb-4140-88a3-12691ba87c4e","i18nLabel":"","resources":[{"id":82322,"lastUpdateDate":1553559397173,"group":"DataSourceI18n","locale":"en","key":"i18n_05955ab3-2efb-4140-88a3-12691ba87c4e","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"TIMESTAMP","sourceType":"VARCHAR","sourceName":"15","targetNames":["END_TIME"],"hint":"EndTime","label":{"group":"DataSourceI18n","key":"i18n_a2de8ac1-c492-49d5-9e66-dd9d2922100e","i18nLabel":"EndTime","resources":[{"id":82323,"lastUpdateDate":1553559397176,"group":"DataSourceI18n","locale":"en","key":"i18n_a2de8ac1-c492-49d5-9e66-dd9d2922100e","value":"EndTime"}]},"category":"MINIMAL","format":"STRING","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_71f0ee6b-9f0e-41c2-bd5c-4591688b19e9","i18nLabel":"","resources":[{"id":82324,"lastUpdateDate":1553559397179,"group":"DataSourceI18n","locale":"en","key":"i18n_71f0ee6b-9f0e-41c2-bd5c-4591688b19e9","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"16","targetNames":["LATITUDE"],"hint":"LATITUDE","label":{"group":"DataSourceI18n","key":"i18n_f10f3cb5-989e-425f-b17f-c60805579479","i18nLabel":"LATITUDE","resources":[{"id":82327,"lastUpdateDate":1553559397189,"group":"DataSourceI18n","locale":"en","key":"i18n_f10f3cb5-989e-425f-b17f-c60805579479","value":"LATITUDE"}]},"category":"MINIMAL","format":"LAT_LON","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_c168c1cf-1047-4572-902f-3e7beb56e0e1","i18nLabel":"","resources":[{"id":82328,"lastUpdateDate":1553559397192,"group":"DataSourceI18n","locale":"en","key":"i18n_c168c1cf-1047-4572-902f-3e7beb56e0e1","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"17","targetNames":["LONGITUDE"],"hint":"LONGITUDE","label":{"group":"DataSourceI18n","key":"i18n_bf8b38fb-4025-4f94-8efb-2186dc6a0d4d","i18nLabel":"LONGITUDE","resources":[{"id":82329,"lastUpdateDate":1553559397195,"group":"DataSourceI18n","locale":"en","key":"i18n_bf8b38fb-4025-4f94-8efb-2186dc6a0d4d","value":"LONGITUDE"}]},"category":"MINIMAL","format":"LAT_LON","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_dc49a11e-dbfc-4645-8c63-f3b0edd2d53b","i18nLabel":"","resources":[{"id":82330,"lastUpdateDate":1553559397198,"group":"DataSourceI18n","locale":"en","key":"i18n_dc49a11e-dbfc-4645-8c63-f3b0edd2d53b","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"2","targetNames":["caseyear"],"hint":"caseyear","label":{"group":"DataSourceI18n","key":"i18n_e12d1cd8-fa55-486b-895e-25541b5f724e","i18nLabel":"caseyear","resources":[{"id":82317,"lastUpdateDate":1553559397157,"group":"DataSourceI18n","locale":"en","key":"i18n_e12d1cd8-fa55-486b-895e-25541b5f724e","value":"caseyear"}]},"category":"FULL","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_817fdb10-663f-44c6-ab63-ba763ae20a2a","i18nLabel":"","resources":[{"id":82318,"lastUpdateDate":1553559397160,"group":"DataSourceI18n","locale":"en","key":"i18n_817fdb10-663f-44c6-ab63-ba763ae20a2a","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"3","targetNames":["casenbr"],"hint":"casenbr","label":{"group":"DataSourceI18n","key":"i18n_52d8629f-4771-4066-b226-4106babe655d","i18nLabel":"casenbr","resources":[{"id":82315,"lastUpdateDate":1553559397150,"group":"DataSourceI18n","locale":"en","key":"i18n_52d8629f-4771-4066-b226-4106babe655d","value":"casenbr"}]},"category":"FULL","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_2981bc47-712f-42b5-957f-9bd48531ee4d","i18nLabel":"","resources":[{"id":82316,"lastUpdateDate":1553559397154,"group":"DataSourceI18n","locale":"en","key":"i18n_2981bc47-712f-42b5-957f-9bd48531ee4d","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"4","targetNames":["reporteddate"],"hint":"reporteddate","label":{"group":"DataSourceI18n","key":"i18n_cde6236e-2d65-4b14-a349-d07341d89a92","i18nLabel":"reporteddate","resources":[{"id":82335,"lastUpdateDate":1553559397213,"group":"DataSourceI18n","locale":"en","key":"i18n_cde6236e-2d65-4b14-a349-d07341d89a92","value":"reporteddate"}]},"category":"FULL","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_bd65c4f4-1754-41df-9b9b-1249d5287f9b","i18nLabel":"","resources":[{"id":82336,"lastUpdateDate":1553559397217,"group":"DataSourceI18n","locale":"en","key":"i18n_bd65c4f4-1754-41df-9b9b-1249d5287f9b","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"5","targetNames":["offense"],"hint":"offense","label":{"group":"DataSourceI18n","key":"i18n_c02deea2-f5d1-4e1a-b551-b959121aa2d9","i18nLabel":"offense","resources":[{"id":82331,"lastUpdateDate":1553559397201,"group":"DataSourceI18n","locale":"en","key":"i18n_c02deea2-f5d1-4e1a-b551-b959121aa2d9","value":"offense"}]},"category":"KEY","length":"200","enumerated":true,"isId":false,"optimize":true,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_c68abb0a-68cf-4112-bf53-863c8bc3f7a9","i18nLabel":"","resources":[{"id":82332,"lastUpdateDate":1553559397204,"group":"DataSourceI18n","locale":"en","key":"i18n_c68abb0a-68cf-4112-bf53-863c8bc3f7a9","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"6","targetNames":["address"],"hint":"address","label":{"group":"DataSourceI18n","key":"i18n_41fed7fd-48e8-44b0-b1fd-3301f92bde76","i18nLabel":"address","resources":[{"id":82307,"lastUpdateDate":1553559397121,"group":"DataSourceI18n","locale":"en","key":"i18n_41fed7fd-48e8-44b0-b1fd-3301f92bde76","value":"address"}]},"category":"KEY","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_9eec6385-6fd6-4985-bc0e-f31dd171a734","i18nLabel":"","resources":[{"id":82308,"lastUpdateDate":1553559397125,"group":"DataSourceI18n","locale":"en","key":"i18n_9eec6385-6fd6-4985-bc0e-f31dd171a734","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"7","targetNames":["ResultCode"],"hint":"ResultCode","label":{"group":"DataSourceI18n","key":"i18n_4c38355c-2514-4ae4-b045-d95e23dc9c79","i18nLabel":"ResultCode","resources":[{"id":82337,"lastUpdateDate":1553559397220,"group":"DataSourceI18n","locale":"en","key":"i18n_4c38355c-2514-4ae4-b045-d95e23dc9c79","value":"ResultCode"}]},"category":"FULL","length":"200","enumerated":false,"isId":false,"optimize":false,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_1e33ffb8-48e4-43bb-903c-9625e6cdb614","i18nLabel":"","resources":[{"id":82338,"lastUpdateDate":1553559397223,"group":"DataSourceI18n","locale":"en","key":"i18n_1e33ffb8-48e4-43bb-903c-9625e6cdb614","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"8","targetNames":["ARREST"],"hint":"ARREST","label":{"group":"DataSourceI18n","key":"i18n_c345f5c9-2799-4733-a433-137535037e4a","i18nLabel":"ARREST","resources":[{"id":82309,"lastUpdateDate":1553559397128,"group":"DataSourceI18n","locale":"en","key":"i18n_c345f5c9-2799-4733-a433-137535037e4a","value":"ARREST"}]},"category":"KEY","length":"200","enumerated":true,"isId":false,"optimize":true,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_c697c39b-d108-4b55-960f-01e16fe41885","i18nLabel":"","resources":[{"id":82310,"lastUpdateDate":1553559397132,"group":"DataSourceI18n","locale":"en","key":"i18n_c697c39b-d108-4b55-960f-01e16fe41885","value":""}]},"userFilterInput":false,"displayedonMap":false},{"type":"VARCHAR","sourceType":"VARCHAR","sourceName":"9","targetNames":["OFFENSE_CODE"],"hint":"OFFENSE_CODE","label":{"group":"DataSourceI18n","key":"i18n_e94b4e68-cd0a-45d7-87b9-32694f058c62","i18nLabel":"OFFENSE_CODE","resources":[{"id":82333,"lastUpdateDate":1553559397207,"group":"DataSourceI18n","locale":"en","key":"i18n_e94b4e68-cd0a-45d7-87b9-32694f058c62","value":"OFFENSE_CODE"}]},"category":"KEY","length":"200","enumerated":true,"isId":false,"optimize":true,"updatable":true,"metric":false,"chart":false,"hidden":false,"ordinal":0,"hover":false,"previewCard":true,"helpMessage":{"group":"DataSourceI18n","key":"i18n_418b250f-19da-48f6-94df-6552b28af693","i18nLabel":"","resources":[{"id":82334,"lastUpdateDate":1553559397210,"group":"DataSourceI18n","locale":"en","key":"i18n_418b250f-19da-48f6-94df-6552b28af693","value":""}]},"userFilterInput":false,"displayedonMap":false}],"geometry":"POINT","dateFormat":"MM/dd/yyyy","timeFormat":"hh:mm a","routingLogic":"AND","styleLogic":"AND","archive":1,"boundary":false,"boundaryFilterPane":false,"correlation":false,"report":false,"table":"IOC.TARGET_TABLE_${TT_NAME_RR_POLICE_INCIDENTS}","view":"IOC.TARGET_VIEW_${TT_NAME_RR_POLICE_INCIDENTS}","serverRendering":false,"nonTrustedSource":false,"comments":false,"voting":false,"imageUploads":false,"icon":"security.png","radius":0.0,"sides":0,"styles":[{"name":"_base_","label":{},"type":"COLOR","line":"#000000","value":"#d3d3d3","weight":1,"opacity":1.0,"scope":"DATASOURCE"}],"extensions":[{"name":"category","label":{},"type":"CUSTOM","disabled":false,"multiple":false,"module":"ICPO","associated":"1"},{"name":"dimension","label":{},"type":"CUSTOM","disabled":false,"multiple":false,"module":"ICPO","associated":"false"},{"name":"name","label":{},"type":"CUSTOM","disabled":false,"multiple":false,"module":"ICPO","associated":"RRPoliceIncidents"},{"name":"resource","label":{},"type":"CUSTOM","disabled":false,"multiple":false,"module":"ICPO","associated":"false"}],"optionalDateTime":false,"minZoomForLoad":0} | | 200 | | $DSID_RRPOLINC= | | |
| GET | /datasource-service/datasources/$DSID_RRPOLINC | | | 200 | =~/(?i)"Name":"${DS_NAME_RR_POLICE_INCIDENTS}"/ | | 1 | |

| script |
| #''Give data receiver time to receive records'' |
| time delay ; | 10000 |

'''Verify the target table has two records'''

| generic database fixture |
| # comment | connectionName | statementType | statementText | responseFormat | getResponse? | getResultCount? | getResponseMessage? |
| Verify the target table has two records | iocdata | read | select count as count from ioc.TARGET_TABLE_${TT_NAME_RR_POLICE_INCIDENTS} | json | [{"COUNT":5000}] | 1 | OK |
