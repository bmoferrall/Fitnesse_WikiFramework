---
Help: Create ICA Juveniles Datasource
Test
---
<test page>

!define TEST_SYSTEM {slim}
!path   ./CognitiveCitiesTesting.jar

'''Include Variable Definitions'''

!include <IocSuite.IocServicesSuite.SetUpVariables

'''Create i18n resources for the data source'''

| generic service validator fixture |
| requestType | serviceName | requestBody | customHeaders | getResponseCode? | getResponseMessage? | getResponseId? | getResultCount? | getUrl? |
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_DsLabel", "value":"Juveniles (Fitnesse)","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_AAB", "value":"AAB","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_BUR", "value":"BUR","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_DOB", "value":"DOB","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_GENDER", "value":"GENDER","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_HOM", "value":"HOM","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_LASTUPDATE", "value":"LASTUPDATE","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_LATITUDE", "value":"LATITUDE","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_LKA", "value":"LKA","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_LONGITUDE", "value":"LONGITUDE","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_LRT", "value":"LRT","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_NCKNM", "value":"NCKNM","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_NOTES", "value":"NOTES","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_RACE", "value":"RACE","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_ROB", "value":"ROB","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_SEX", "value":"SEX","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_SUBFNM", "value":"SUBFNM","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_SUBJECTID", "value":"SUBJECTID","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_SUBLNM", "value":"SUBLNM","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_TZONE", "value":"TZONE","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_VEH", "value":"VEH","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_ZIP", "value":"ZIP","messages": []}|||||||
|POST|/i18n-service/resources|{"group": "Fitnesse", "locale":"en", "key":"ICAJuveniles_Fitnesse_ZONEID", "value":"ZONEID","messages": []}|||||||

'''CREATE DATABASE TYPE DATASOURCE'''

| generic service validator fixture |
| requestType | serviceName | requestBody | customHeaders | getResponseCode? | getResponseMessage? | getResponseId? | getResultCount? | getUrl? |
| POST | /datasource-service/datasources/ | { "name": "${DS_NAME_ICA_JUVENILES}", "type": "Database", "scope": "DATASOURCE", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_DsLabel", "i18nLabel": "Juveniles (Fitnesse)" }, "i18nLabel": "Juveniles (Fitnesse)", "description": {}, "receiver": { "id": 38, "type": "com.ibm.ioc.datareceiver.types.DataReceiverTable", "interval": 0, "unit": "MINUTES", "started": true }, "source": { "protocol": "com.ibm.ioc.datasource.ColumnParserDatabase", "options": "DB2", "host": "${DBSERVER}", "port": 50000, "user": "${DBUSER}", "password": "${DBPASSWORD}", "directory": "iocdata", "filename": "${DB_NAME_ICA_JUVENILES}", "persistData": true }, "columns": [ { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "AAB", "targetNames": [ "AAB" ], "hint": "AAB", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_AAB", "i18nLabel": "AAB" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_efec13fe-9aa8-4c1e-80ad-2d0e76065c24", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "BUR", "targetNames": [ "BUR" ], "hint": "BUR", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_BUR", "i18nLabel": "BUR" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_12c54e1c-47a4-4556-9651-4f038770de83", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "TIMESTAMP", "sourceType": "TIMESTAMP", "sourceName": "DOB", "targetNames": [ "DOB" ], "hint": "DOB", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_DOB", "i18nLabel": "DOB" }, "category": "FULL", "enumerated": true, "isId": false, "optimize": true, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_072e5057-f16a-4854-91f4-8c97f207a476", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "GENDER", "targetNames": [ "GENDER" ], "hint": "GENDER", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_GENDER", "i18nLabel": "GENDER" }, "category": "KEY", "length": "200", "enumerated": true, "isId": false, "optimize": true, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_1154b2ca-b27a-4f6c-8c68-c782bc5e8e5b", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "HOM", "targetNames": [ "HOM" ], "hint": "HOM", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_HOM", "i18nLabel": "HOM" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_7f50c5c7-a596-4350-be78-ec21017290c2", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "TIMESTAMP", "sourceType": "TIMESTAMP", "sourceName": "LASTUPDATE", "targetNames": [ "LASTUPDATE" ], "hint": "LASTUPDATE", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_LASTUPDATE", "i18nLabel": "LASTUPDATE" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_74981825-59d1-4fd5-8f98-f8b725203301", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "DOUBLE", "sourceName": "LATITUDE", "targetNames": [ "LATITUDE" ], "hint": "LATITUDE", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_LATITUDE", "i18nLabel": "LATITUDE" }, "category": "MINIMAL", "format": "LAT_LON", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_c47d2355-5232-4e67-9382-230da9df2ff3", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "LKA", "targetNames": [ "LKA" ], "hint": "LKA", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_LKA", "i18nLabel": "LKA" }, "category": "FULL", "length": "200", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_40dc9796-6e6d-4e8c-a8b1-aa670a2cdaf8", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "LONGITUDE", "targetNames": [ "LONGITUDE" ], "hint": "LONGITUDE", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_LONGITUDE", "i18nLabel": "LONGITUDE" }, "category": "MINIMAL", "format": "LAT_LON", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_212413f9-be3f-421c-9755-23356d939cca", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "LRT", "targetNames": [ "LRT" ], "hint": "LRT", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_LRT", "i18nLabel": "LRT" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_07c88742-034d-464d-ae0f-3c49b84c5ffa", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "NCKNM", "targetNames": [ "NCKNM" ], "hint": "NCKNM", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_NCKNM", "i18nLabel": "NCKNM" }, "category": "FULL", "length": "200", "enumerated": true, "isId": false, "optimize": true, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_fd7b0a23-45e0-4daf-bae7-9fc16899e811", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "NOTES", "targetNames": [ "NOTES" ], "hint": "NOTES", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_NOTES", "i18nLabel": "NOTES" }, "category": "FULL", "length": "200", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_7b58ceda-93b4-49c2-9feb-844e2a7ca4a3", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "RACE", "targetNames": [ "RACE" ], "hint": "RACE", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_RACE", "i18nLabel": "RACE" }, "category": "KEY", "length": "200", "enumerated": true, "isId": false, "optimize": true, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_cbafbaa2-0228-40a5-9a7b-112e4ad44e70", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "ROB", "targetNames": [ "ROB" ], "hint": "ROB", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_ROB", "i18nLabel": "ROB" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_04b804aa-d01a-45c0-b9c9-7a0b0ff5a66c", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "SEX", "targetNames": [ "SEX" ], "hint": "SEX", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_SEX", "i18nLabel": "SEX" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_e4de8ccb-ffe2-44aa-a95c-391f5ec97931", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "SUBFNM", "targetNames": [ "SUBFNM" ], "hint": "SUBFNM", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_SUBFNM", "i18nLabel": "SUBFNM" }, "category": "FULL", "length": "200", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_6c643009-aedd-4011-8a91-6e3b163ab870", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "SUBJECTID", "targetNames": [ "SUBJECTID" ], "hint": "SUBJECTID", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_SUBJECTID", "i18nLabel": "SUBJECTID" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_a47aeb17-b4d9-41e5-81dc-599f95f24bc2", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "SUBLNM", "targetNames": [ "NAME" ], "hint": "SUBLNM", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_SUBLNM", "i18nLabel": "SUBLNM" }, "category": "MINIMAL", "format": "STRING", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_874ef3d0-8abc-4728-89ad-75726f6f9590", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "TZONE", "targetNames": [ "TZONE" ], "hint": "TZONE", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_TZONE", "i18nLabel": "TZONE" }, "category": "FULL", "enumerated": true, "isId": false, "optimize": true, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_1af9ce3f-8e2f-4ffd-8b6b-b397e2516660", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "VEH", "targetNames": [ "VEH" ], "hint": "VEH", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_VEH", "i18nLabel": "VEH" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_08135a6b-3032-4ddf-8cea-d90f3e7467a6", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "VARCHAR", "sourceType": "VARCHAR", "sourceName": "ZIP", "targetNames": [ "ZIP" ], "hint": "ZIP", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_ZIP", "i18nLabel": "ZIP" }, "category": "FULL", "length": "200", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_5448faef-69a0-41da-951d-32f2cfda4ec9", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false }, { "type": "INTEGER", "sourceType": "INTEGER", "sourceName": "ZONEID", "targetNames": [ "ZONEID" ], "hint": "ZONEID", "label": { "group": "Fitnesse", "key": "ICAJuveniles_Fitnesse_ZONEID", "i18nLabel": "ZONEID" }, "category": "FULL", "enumerated": false, "isId": false, "optimize": false, "updatable": true, "metric": false, "chart": false, "hidden": false, "ordinal": 0, "hover": false, "previewCard": true, "helpMessage": { "group": "Fitnesse", "key": "i18n_34029bb8-15f8-4af7-a5e9-832a116eeda0", "i18nLabel": "" }, "userFilterInput": false, "displayedonMap": false } ], "geometry": "POINT", "routingLogic": "AND", "styleLogic": "AND", "archive": 1, "boundary": false, "boundaryFilterPane": false, "correlation": false, "report": false, "table": "IOC.TARGET_TABLE_${TT_NAME_ICA_JUVENILES}", "view": "IOC.TARGET_VIEW_${TT_NAME_ICA_JUVENILES}", "serverRendering": false, "nonTrustedSource": false, "comments": false, "voting": false, "imageUploads": false, "icon": "familyBathroom.png", "radius": 0, "sides": 0, "styles": [ { "name": "_base_", "label": {}, "type": "COLOR", "line": "#000000", "value": "#d3d3d3", "weight": 1, "opacity": 1, "scope": "DATASOURCE" } ], "extensions": [ { "name": "category", "label": {}, "type": "CUSTOM", "disabled": false, "multiple": false, "module": "ICPO", "associated": "1" }, { "name": "dimension", "label": {}, "type": "CUSTOM", "disabled": false, "multiple": false, "module": "ICPO", "associated": "false" }, { "name": "name", "label": {}, "type": "CUSTOM", "disabled": false, "multiple": false, "module": "ICPO", "associated": "${DB_NAME_ICA_JUVENILES}" }, { "name": "resource", "label": {}, "type": "CUSTOM", "disabled": false, "multiple": false, "module": "ICPO", "associated": "false" } ], "optionalDateTime": true, "minZoomForLoad": 0 } | | 200 | | $DSID_ICAJUVENILES= | | |
| GET | /datasource-service/datasources/$DSID_ICAJUVENILES | | | 200 | =~/(?i)"Name":"${DS_NAME_ICA_JUVENILES}"/ | | 1 | |

| script |
| #''Give data receiver time to receive records'' |
| time delay ; | 10000 |

'''Verify the target table has the correct number of records'''

| generic database fixture |
| connectionName | statementType | statementText | responseFormat | getResponse? | getResultCount? | getResponseMessage? |getFirstResultField?|
| iocdata | read | select count as count from ioc.TARGET_TABLE_${TT_NAME_ICA_JUVENILES} | json | [{"COUNT":190}] | 1 | OK |190|
